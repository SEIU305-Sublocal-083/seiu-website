<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Understand how our union dues are calculated and how each dollar is allocated with an interactive chart.">
    <meta name="author" content="SEIU Local 503 at OSU">
    <title>Understanding Union Dues - SEIU Local 503, OSU</title>
    <style>html{visibility:hidden;}html.tw-ready{visibility:visible;}</style>
    <script src="https://cdn.tailwindcss.com" onload="document.documentElement.classList.add('tw-ready')"></script>
    <link rel="icon" href="/images/logo.png" type="image/png">
    <link rel="apple-touch-icon" href="/images/logo.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lora:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js" onerror="(function(){var s=document.createElement('script');s.src='https://unpkg.com/chart.js@4.4.1/dist/chart.umd.js';document.head.appendChild(s);}())"></script>
    <style>
        :root {
            --brand-purple-dark: #4C1D95;
            --brand-purple: #7C3AED;
            --brand-purple-light: #EDE9FE;
            --brand-dark: #111827;
            --brand-light: #F9FAFB;
            --text-primary: #1F2937;
            --text-secondary: #374151;
            --border-color: #D1D5DB;
        }

        html {
            scroll-padding-top: 80px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--brand-light);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Lora', serif;
            color: var(--brand-purple-dark);
        }

        a:focus-visible, button:focus-visible, details:focus-visible, input:focus-visible, textarea:focus-visible {
            outline: 3px solid var(--brand-purple);
            outline-offset: 2px;
            border-radius: 4px;
        }

        .btn {
            @apply font-bold py-3 px-6 rounded-lg transition-all duration-300 ease-in-out transform hover:scale-105;
        }

        .btn-primary {
            @apply bg-gradient-to-r from-brand-purple to-violet-600 text-white shadow-md hover:shadow-lg;
        }

        .allocation-button {
            @apply w-full text-left rounded-xl border border-border-color bg-white px-4 py-3 transition-all duration-200;
        }

        .allocation-button:hover {
            @apply border-brand-purple shadow-sm;
        }

        .allocation-button.is-active {
            @apply border-brand-purple bg-brand-purple-light shadow-sm;
        }

        .chart-tab {
            @apply rounded-lg border border-border-color px-4 py-2 text-sm font-semibold text-text-secondary transition-colors;
        }

        .chart-tab:hover {
            @apply border-brand-purple text-brand-purple;
        }

        .chart-tab.is-active {
            @apply border-brand-purple bg-brand-purple-light text-brand-purple-dark;
        }

        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-purple-dark': 'var(--brand-purple-dark)',
                        'brand-purple': 'var(--brand-purple)',
                        'brand-purple-light': 'var(--brand-purple-light)',
                        'brand-dark': 'var(--brand-dark)',
                        'brand-light': 'var(--brand-light)',
                        'text-primary': 'var(--text-primary)',
                        'text-secondary': 'var(--text-secondary)',
                        'border-color': 'var(--border-color)',
                    }
                }
            }
        }
    </style>
    <!-- SEO META START -->
    <link rel="canonical" href="https://www.local083.org/test-pages/calculator.html">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.local083.org/test-pages/calculator.html">
    <meta property="og:title" content="Understanding Union Dues - SEIU Local 503, OSU">
    <meta property="og:description" content="Understand how our union dues are calculated and how each dollar is allocated with an interactive chart.">
    <meta property="og:image" content="https://www.local083.org/images/card.webp">
    <meta property="og:site_name" content="SEIU Local 503 at Oregon State University">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://www.local083.org/test-pages/calculator.html">
    <meta name="twitter:title" content="Understanding Union Dues - SEIU Local 503, OSU">
    <meta name="twitter:description" content="Understand how our union dues are calculated and how each dollar is allocated with an interactive chart.">
    <meta name="twitter:image" content="https://www.local083.org/images/card.webp">
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://www.local083.org#organization",
      "name": "SEIU Local 503 at Oregon State University",
      "url": "https://www.local083.org",
      "logo": "https://www.local083.org/images/logo.png"
    },
    {
      "@type": "WebSite",
      "@id": "https://www.local083.org#website",
      "name": "SEIU Local 503 at Oregon State University",
      "url": "https://www.local083.org",
      "publisher": {
        "@id": "https://www.local083.org#organization"
      }
    },
    {
      "@type": "WebPage",
      "@id": "https://www.local083.org/test-pages/calculator.html#webpage",
      "url": "https://www.local083.org/test-pages/calculator.html",
      "name": "Understanding Union Dues - SEIU Local 503, OSU",
      "description": "Understand how our union dues are calculated and how each dollar is allocated with an interactive chart.",
      "isPartOf": {
        "@id": "https://www.local083.org#website"
      },
      "about": {
        "@id": "https://www.local083.org#organization"
      }
    }
  ]
}
    </script>
    <!-- SEO META END -->
    <script src="/js/analytics.js" defer></script>
</head>
<body class="bg-brand-light">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-50 focus:bg-white focus:text-brand-purple-dark focus:px-4 focus:py-2 focus:rounded focus:shadow-lg">Skip to content</a>

    <header class="bg-white/80 backdrop-blur-lg border-b border-border-color sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/index.html" class="flex items-center space-x-2">
                <span class="text-2xl font-bold text-brand-purple-dark">SEIU 503</span>
                <span class="text-lg text-text-secondary hidden md:block">| Oregon State University</span>
            </a>
            <div class="hidden lg:flex space-x-8">
                <a href="/about.html" class="text-text-secondary hover:text-brand-purple transition-colors">About</a>
                <a href="/events.html" class="text-text-secondary hover:text-brand-purple transition-colors">Events</a>
                <a href="/news.html" class="text-text-secondary hover:text-brand-purple transition-colors">News</a>
                <a href="/resources.html" class="text-brand-purple font-bold">Resources & Rights</a>
                <a href="/leadership.html" class="text-text-secondary hover:text-brand-purple transition-colors">Leadership</a>
                <a href="/contact.html" class="text-text-secondary hover:text-brand-purple transition-colors">Contact</a>
            </div>
            <div class="lg:hidden">
                <button id="mobile-menu-button" class="text-text-secondary hover:text-brand-purple focus:outline-none" aria-label="Open menu" aria-controls="mobile-menu" aria-expanded="false">
                    <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden lg:hidden absolute top-full left-0 w-full bg-white border-t border-border-color shadow-lg">
            <a href="/about.html" class="block text-center py-3 px-6 text-lg text-text-secondary hover:bg-brand-purple-light">About</a>
            <a href="/events.html" class="block text-center py-3 px-6 text-lg text-text-secondary hover:bg-brand-purple-light">Events</a>
            <a href="/news.html" class="block text-center py-3 px-6 text-lg text-text-secondary hover:bg-brand-purple-light">News</a>
            <a href="/resources.html" class="block text-center py-3 px-6 text-lg text-brand-purple bg-brand-purple-light font-semibold">Resources & Rights</a>
            <a href="/leadership.html" class="block text-center py-3 px-6 text-lg text-text-secondary hover:bg-brand-purple-light">Leadership</a>
            <a href="/contact.html" class="block text-center py-3 px-6 text-lg text-text-secondary hover:bg-brand-purple-light">Contact</a>
        </div>
    </header>

    <section class="bg-brand-purple-light border-b border-border-color">
        <div class="container mx-auto px-6 py-16 text-center">
            <h1 class="text-5xl font-bold">Understanding Our Union Dues</h1>
            <p class="mt-4 text-lg text-text-secondary max-w-3xl mx-auto">Our dues are an investment in the power we build together. Use the calculator to see how dues are estimated and how each dollar supports our work.</p>
        </div>
    </section>

    <main id="main-content" class="container mx-auto px-6 py-16 space-y-12">
        <section class="bg-white p-8 md:p-10 rounded-xl border border-border-color shadow-sm">
            <div class="grid lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <h2 class="text-3xl font-bold">How dues are calculated</h2>
                    <p class="mt-4 text-lg text-text-secondary">Our dues structure is designed to be proportional and transparent. We base monthly dues on regular gross pay before taxes or deductions, and we never include overtime in the calculation.</p>
                    <ul class="mt-6 list-disc list-inside space-y-2 text-text-secondary">
                        <li>Dues rate is <strong class="text-brand-purple-dark">1.7%</strong> of monthly gross pay.</li>
                        <li>A flat <strong class="text-brand-purple-dark">$2.75</strong> is added each month.</li>
                        <li>Hours are capped at <strong class="text-brand-purple-dark">40 per week</strong> for this estimate.</li>
                    </ul>
                </div>
                <div class="bg-brand-purple-light rounded-xl border border-border-color p-6">
                    <h3 class="text-2xl font-bold">Formula</h3>
                    <p class="mt-3 text-text-secondary">Monthly dues = (<strong class="text-brand-purple-dark">monthly gross × 1.7%</strong>) + <strong class="text-brand-purple-dark">$2.75</strong></p>
                    <p class="mt-3 text-sm text-text-secondary">Monthly gross is estimated as: hourly wage × weekly hours (max 40) × 4.333.</p>
                </div>
            </div>
        </section>

        <section class="grid lg:grid-cols-2 gap-8 items-start">
            <div class="bg-white p-8 md:p-10 rounded-xl border border-border-color shadow-sm">
                <h2 class="text-3xl font-bold">Estimate your monthly dues</h2>
                <div class="mt-6 space-y-6">
                    <div>
                        <label for="hourly-wage" class="block text-lg font-medium text-text-primary">Hourly wage ($)</label>
                        <input type="number" id="hourly-wage" name="hourly-wage" class="mt-2 block w-full p-3 border border-border-color rounded-md shadow-sm focus:ring-brand-purple focus:border-brand-purple text-lg" placeholder="e.g., 22.50" step="0.01" min="0" inputmode="decimal">
                    </div>
                    <div>
                        <label for="hours-week" class="block text-lg font-medium text-text-primary">Hours worked per week</label>
                        <input type="number" id="hours-week" name="hours-week" class="mt-2 block w-full p-3 border border-border-color rounded-md shadow-sm focus:ring-brand-purple focus:border-brand-purple text-lg" placeholder="e.g., 40" value="40" min="0" inputmode="decimal">
                        <p id="hours-cap-message" class="mt-2 text-sm text-text-secondary hidden">Hours above 40 are capped at 40 for dues estimates because overtime is not included.</p>
                    </div>
                </div>

                <div class="mt-8 grid sm:grid-cols-2 gap-4">
                    <div class="rounded-xl border border-border-color bg-gray-50 p-4">
                        <p class="text-sm uppercase tracking-wide text-text-secondary">Estimated monthly gross</p>
                        <p id="monthly-gross-result" class="mt-2 text-3xl font-bold text-brand-purple-dark">$0.00</p>
                    </div>
                    <div class="rounded-xl border border-border-color bg-brand-purple-light p-4">
                        <p class="text-sm uppercase tracking-wide text-text-secondary">Estimated monthly dues</p>
                        <p id="dues-result" class="mt-2 text-3xl font-bold text-brand-purple">$0.00</p>
                    </div>
                </div>

                <div class="mt-8 border-t border-border-color pt-6">
                    <h3 class="text-2xl font-bold">Current allocation amounts</h3>
                    <div class="mt-4 space-y-2 text-text-secondary">
                        <p><strong class="text-[#4C1D95]">Statewide Power (50%):</strong> <span id="state-amount">$0.00</span></p>
                        <p><strong class="text-[#7C3AED]">Our Local Union (40%):</strong> <span id="local-amount">$0.00</span></p>
                        <p><strong class="text-[#14B8A6]">Unity Fund (10%):</strong> <span id="unity-amount">$0.00</span></p>
                    </div>
                </div>
            </div>

            <div class="bg-white p-8 md:p-10 rounded-xl border border-border-color shadow-sm">
                <h2 class="text-3xl font-bold">Where your dues go</h2>
                <p class="mt-3 text-text-secondary">Choose a view to see how dues compare to monthly gross income (before taxes) and how dues are allocated across our union priorities.</p>
                <div class="mt-6 flex flex-wrap gap-3" role="tablist" aria-label="Dues chart views">
                    <button id="chart-tab-gross" class="chart-tab is-active" type="button" role="tab" aria-selected="true" aria-controls="chart-panel-gross" tabindex="0">Gross Income View</button>
                    <button id="chart-tab-allocation" class="chart-tab" type="button" role="tab" aria-selected="false" aria-controls="chart-panel-allocation" tabindex="-1">Dues Allocation View</button>
                </div>

                <div id="chart-panel-gross" class="mt-6" role="tabpanel" aria-labelledby="chart-tab-gross">
                    <div class="w-full max-w-xs mx-auto">
                        <canvas id="gross-income-pie-chart" class="w-64 h-64 mx-auto" width="256" height="256" aria-label="Interactive pie chart showing union dues versus remaining gross income before taxes" role="img"></canvas>
                    </div>
                    <div class="mt-6 rounded-xl border border-border-color bg-gray-50 p-5">
                        <p class="text-text-secondary">Union dues this month: <strong id="gross-dues-amount" class="text-brand-purple-dark">$0.00</strong> (<strong id="gross-dues-percent" class="text-brand-purple-dark">0.00%</strong> of gross income)</p>
                        <p class="mt-2 text-text-secondary">Remaining gross income (before taxes): <strong id="gross-remaining-amount" class="text-brand-purple-dark">$0.00</strong></p>
                    </div>
                </div>

                <div id="chart-panel-allocation" class="mt-6 hidden" role="tabpanel" aria-labelledby="chart-tab-allocation">
                    <div class="grid md:grid-cols-2 gap-6 items-start">
                        <div class="w-full max-w-xs mx-auto">
                            <canvas id="dues-pie-chart" class="w-64 h-64 mx-auto" width="256" height="256" aria-label="Interactive pie chart showing the distribution of union dues" role="img" tabindex="0"></canvas>
                        </div>
                        <div class="space-y-3" id="allocation-legend" aria-label="Dues allocation details">
                            <button type="button" class="allocation-button" data-segment-index="0">
                                <div class="flex items-center justify-between gap-2">
                                    <div class="flex items-center gap-3">
                                        <span class="h-3 w-3 rounded-full bg-[#4C1D95]" aria-hidden="true"></span>
                                        <span class="font-semibold text-text-primary">Statewide Power</span>
                                    </div>
                                    <span class="text-sm text-text-secondary">50%</span>
                                </div>
                            </button>
                            <button type="button" class="allocation-button" data-segment-index="1">
                                <div class="flex items-center justify-between gap-2">
                                    <div class="flex items-center gap-3">
                                        <span class="h-3 w-3 rounded-full bg-[#7C3AED]" aria-hidden="true"></span>
                                        <span class="font-semibold text-text-primary">Our Local Union</span>
                                    </div>
                                    <span class="text-sm text-text-secondary">40%</span>
                                </div>
                            </button>
                            <button type="button" class="allocation-button" data-segment-index="2">
                                <div class="flex items-center justify-between gap-2">
                                    <div class="flex items-center gap-3">
                                        <span class="h-3 w-3 rounded-full bg-[#14B8A6]" aria-hidden="true"></span>
                                        <span class="font-semibold text-text-primary">Unity Fund</span>
                                    </div>
                                    <span class="text-sm text-text-secondary">10%</span>
                                </div>
                            </button>
                        </div>
                    </div>
                    <div id="segment-detail-card" class="mt-6 rounded-xl border border-border-color bg-gray-50 p-5" aria-live="polite">
                        <p id="segment-detail-title" class="text-lg font-bold text-brand-purple-dark">Statewide Power</p>
                        <p class="mt-1 text-text-secondary"><span id="segment-detail-percent">50%</span> of dues, currently <span id="segment-detail-amount">$0.00</span>.</p>
                        <p id="segment-detail-copy" class="mt-3 text-text-secondary">Enter wage and hours to see your personalized dues breakdown.</p>
                    </div>
                </div>
                <p id="chart-unavailable-message" class="mt-4 text-sm text-text-secondary hidden">Charts could not be loaded in this browser session. Refresh the page and try again.</p>
            </div>
        </section>

        <section class="bg-white p-8 md:p-10 rounded-xl border border-border-color shadow-sm">
            <h2 class="text-3xl font-bold">What each allocation supports</h2>
            <div class="mt-6 grid md:grid-cols-3 gap-6">
                <div class="rounded-xl border border-border-color p-6 bg-gray-50">
                    <h3 class="text-2xl font-bold text-[#4C1D95]">Statewide Power</h3>
                    <p class="mt-3 text-text-secondary">Supports statewide bargaining, organizing, and policy work that raises standards for public service workers across Oregon.</p>
                </div>
                <div class="rounded-xl border border-border-color p-6 bg-gray-50">
                    <h3 class="text-2xl font-bold text-[#7C3AED]">Our Local Union</h3>
                    <p class="mt-3 text-text-secondary">Funds our day-to-day local work at OSU, including steward support, representation, member communications, and trainings.</p>
                </div>
                <div class="rounded-xl border border-border-color p-6 bg-gray-50">
                    <h3 class="text-2xl font-bold text-[#14B8A6]">Unity Fund</h3>
                    <p class="mt-3 text-text-secondary">Contributes to broader union solidarity and larger campaigns that strengthen worker power beyond our campus.</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-100 pt-12 pb-8 text-text-primary">
        <div class="container mx-auto px-6">
            <div class="mt-10 pt-8 border-t border-gray-700 text-center">
            </div>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                <div class="md:col-span-2 lg:col-span-1">
                    <div class="flex items-center mb-4">
                        <img src="/images/logo.png" alt="SEIU 503 Logo" class="h-12 w-12 mr-3 bg-white p-1 rounded">
                        <div>
                            <h3 class="text-xl font-bold">SEIU Local 503</h3>
                            <p class="text-text-secondary text-sm">Oregon State University</p>
                        </div>
                    </div>
                    <p class="text-text-secondary leading-relaxed">Representing the classified employees of Oregon State University. We fight for fair contracts, defend workplace rights, and build a united community.</p>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4 tracking-wider uppercase">Quick Links</h4>
                    <ul class="space-y-3">
                        <li><a href="/about.html" class="text-text-secondary hover:text-brand-purple transition-colors">About Us</a></li>
                        <li><a href="/events.html" class="text-text-secondary hover:text-brand-purple transition-colors">Events</a></li>
                        <li><a href="/news.html" class="text-text-secondary hover:text-brand-purple transition-colors">News</a></li>
                        <li><a href="/leadership.html" class="text-text-secondary hover:text-brand-purple transition-colors">Leadership</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4 tracking-wider uppercase"><a href="/resources.html" class="hover:text-brand-purple transition-colors">Resources</a></h4>
                    <ul class="space-y-3">
                        <li><a href="/resources.html" class="text-text-secondary hover:text-brand-purple transition-colors">Resources & Rights</a></li>
                        <li><a href="/resources/seiu_cba_2022-2026.pdf" class="text-text-secondary hover:text-brand-purple transition-colors">Our Contract (PDF)</a></li>
                        <li><a href="/resources/stewards.html" class="text-text-secondary hover:text-brand-purple transition-colors">Find a Steward</a></li>
                        <li><a href="/resources/weingarten-rights.html" class="text-text-secondary hover:text-brand-purple transition-colors">Weingarten Rights</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4 tracking-wider uppercase"><a href="/contact.html" class="hover:text-brand-purple transition-colors">Contact Us</a></h4>
                    <ul class="space-y-3 text-text-secondary">
                        <li class="flex items-start">
                            <span class="mr-2 mt-1">✉️</span>
                            <a href="mailto:083execteam@seiu503.org" class="hover:text-brand-purple transition-colors">083execteam@seiu503.org</a>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2 mt-1">✉️</span>
                            <a href="mailto:083stewards@seiu503.org" class="hover:text-brand-purple transition-colors">083stewards@seiu503.org</a>
                        </li>
                        <li class="flex items-start">
                            <span class="mr-2 mt-1">&#128205;</span>
                            <a href="https://maps.app.goo.gl/9TWRZ9F4wjVjacsZ7" class="hover:text-brand-purple transition-colors">Adams Hall, Room 109<br>Corvallis, OR 97331</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="mt-10 pt-8 border-t border-gray-700 text-center space-y-2">
                <p class="text-text-secondary text-sm">&copy; 2026 SEIU Local 503, Sublocal 083. All rights reserved.</p>
                <p class="text-text-secondary text-xs">
                    <a href="#" class="underline hover:text-brand-purple" onclick="event.preventDefault(); (localStorage.getItem('ph_opt_out') === '1' ? phOptIn() : phOptOut());">
                        Privacy settings
                    </a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const navLinks = document.querySelectorAll('#mobile-menu a');

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    mobileMenuButton.setAttribute('aria-expanded', String(!isExpanded));
                    mobileMenu.classList.toggle('hidden');
                });

                navLinks.forEach((link) => {
                    link.addEventListener('click', () => {
                        mobileMenu.classList.add('hidden');
                        mobileMenuButton.setAttribute('aria-expanded', 'false');
                    });
                });
            }

            const hourlyWageInput = document.getElementById('hourly-wage');
            const hoursWeekInput = document.getElementById('hours-week');
            const hoursCapMessage = document.getElementById('hours-cap-message');

            const monthlyGrossResult = document.getElementById('monthly-gross-result');
            const duesResult = document.getElementById('dues-result');

            const stateAmount = document.getElementById('state-amount');
            const localAmount = document.getElementById('local-amount');
            const unityAmount = document.getElementById('unity-amount');

            const grossDuesAmount = document.getElementById('gross-dues-amount');
            const grossDuesPercent = document.getElementById('gross-dues-percent');
            const grossRemainingAmount = document.getElementById('gross-remaining-amount');

            const chartTabGross = document.getElementById('chart-tab-gross');
            const chartTabAllocation = document.getElementById('chart-tab-allocation');
            const chartPanelGross = document.getElementById('chart-panel-gross');
            const chartPanelAllocation = document.getElementById('chart-panel-allocation');
            const chartTabs = [chartTabGross, chartTabAllocation];

            const detailTitle = document.getElementById('segment-detail-title');
            const detailPercent = document.getElementById('segment-detail-percent');
            const detailAmount = document.getElementById('segment-detail-amount');
            const detailCopy = document.getElementById('segment-detail-copy');

            const legendButtons = Array.from(document.querySelectorAll('[data-segment-index]'));

            const DUES_RATE = 0.017;
            const DUES_FLAT = 2.75;
            const WEEKS_PER_MONTH = 4.333;
            const MAX_WEEKLY_HOURS = 40;
            const ALLOCATIONS = [
                {
                    label: 'Statewide Power',
                    percent: 0.5,
                    color: '#4C1D95',
                    copy: 'Supports statewide bargaining, organizing, and political action to raise standards for public service workers across Oregon.'
                },
                {
                    label: 'Our Local Union',
                    percent: 0.4,
                    color: '#7C3AED',
                    copy: 'Funds our local union operations at OSU, including steward training, member support, contract enforcement, and communication.'
                },
                {
                    label: 'Unity Fund',
                    percent: 0.1,
                    color: '#14B8A6',
                    copy: 'Supports broader solidarity and larger worker campaigns through our international union.'
                }
            ];

            let currentDues = 0;
            let selectedSegmentIndex = 0;
            let hoveredSegmentIndex = null;
            let activeChartTab = 'gross';
            const chartUnavailableMessage = document.getElementById('chart-unavailable-message');
            const canRenderCharts = typeof window.Chart !== 'undefined';
            const pieChartCanvas = document.getElementById('dues-pie-chart');

            let grossIncomeChart = null;
            let duesChart = null;

            if (canRenderCharts) {
                grossIncomeChart = new Chart(document.getElementById('gross-income-pie-chart').getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Union Dues', 'Remaining Gross Income'],
                        datasets: [{
                            data: [0, 0],
                            backgroundColor: ['#7C3AED', '#CBD5E1'],
                            borderColor: '#ffffff',
                            borderWidth: 2,
                            hoverOffset: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        cutout: '55%',
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label(context) {
                                        const label = context.label || '';
                                        const value = Number(context.raw || 0);
                                        return `${label}: ${formatCurrency(value)}`;
                                    }
                                }
                            }
                        }
                    }
                });

                duesChart = new Chart(pieChartCanvas.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: ALLOCATIONS.map((item) => item.label),
                        datasets: [{
                            data: [0, 0, 0],
                            backgroundColor: ALLOCATIONS.map((item) => item.color),
                            borderColor: '#ffffff',
                            borderWidth: 2,
                            hoverOffset: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true,
                        cutout: '55%',
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label(context) {
                                        const label = context.label || '';
                                        const value = Number(context.raw || 0);
                                        return `${label}: ${formatCurrency(value)}`;
                                    }
                                }
                            }
                        },
                        onHover(event, elements) {
                            if (!elements.length) {
                                hoveredSegmentIndex = null;
                                renderActiveState();
                                return;
                            }
                            hoveredSegmentIndex = elements[0].index;
                            renderActiveState();
                        },
                        onClick(event, elements) {
                            if (!elements.length) {
                                return;
                            }
                            selectedSegmentIndex = elements[0].index;
                            renderActiveState();
                        }
                    }
                });
            } else if (chartUnavailableMessage) {
                chartUnavailableMessage.classList.remove('hidden');
            }

            function formatCurrency(value) {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD'
                }).format(value);
            }

            function computeAllocationAmounts(totalDues) {
                return ALLOCATIONS.map((allocation, index) => {
                    if (index < ALLOCATIONS.length - 1) {
                        return Number((totalDues * allocation.percent).toFixed(2));
                    }
                    const runningTotal = ALLOCATIONS
                        .slice(0, -1)
                        .reduce((sum, item) => sum + Number((totalDues * item.percent).toFixed(2)), 0);
                    return Number((totalDues - runningTotal).toFixed(2));
                });
            }

            function updateSummary(totalDues, monthlyGross, allocationAmounts) {
                monthlyGrossResult.textContent = formatCurrency(monthlyGross);
                duesResult.textContent = formatCurrency(totalDues);
                stateAmount.textContent = formatCurrency(allocationAmounts[0]);
                localAmount.textContent = formatCurrency(allocationAmounts[1]);
                unityAmount.textContent = formatCurrency(allocationAmounts[2]);
            }

            function updateAllocationChart(allocationAmounts) {
                if (!duesChart) {
                    return;
                }
                duesChart.data.datasets[0].data = allocationAmounts;
                duesChart.update();
            }

            function updateGrossIncomeChart(totalDues, monthlyGross) {
                const remainingGross = Math.max(monthlyGross - totalDues, 0);
                const duesPercentOfGross = monthlyGross > 0 ? (totalDues / monthlyGross) * 100 : 0;

                grossDuesAmount.textContent = formatCurrency(totalDues);
                grossDuesPercent.textContent = `${duesPercentOfGross.toFixed(2)}%`;
                grossRemainingAmount.textContent = formatCurrency(remainingGross);

                if (!grossIncomeChart) {
                    return;
                }
                grossIncomeChart.data.datasets[0].data = [
                    Number(totalDues.toFixed(2)),
                    Number(remainingGross.toFixed(2))
                ];
                grossIncomeChart.update();
            }

            function renderActiveState() {
                const activeIndex = hoveredSegmentIndex !== null ? hoveredSegmentIndex : selectedSegmentIndex;
                legendButtons.forEach((button, index) => {
                    button.classList.toggle('is-active', index === activeIndex);
                    button.setAttribute('aria-pressed', String(index === activeIndex));
                });
                if (!duesChart) {
                    updateDetailCard(activeIndex);
                    return;
                }
                duesChart.setActiveElements([{ datasetIndex: 0, index: activeIndex }]);
                duesChart.update('none');
                updateDetailCard(activeIndex);
            }

            function updateDetailCard(index) {
                const allocation = ALLOCATIONS[index];
                const allocationAmounts = computeAllocationAmounts(currentDues);
                detailTitle.textContent = allocation.label;
                detailPercent.textContent = `${(allocation.percent * 100).toFixed(0)}%`;
                detailAmount.textContent = formatCurrency(allocationAmounts[index]);
                if (currentDues > 0) {
                    detailCopy.textContent = allocation.copy;
                } else {
                    detailCopy.textContent = 'Enter wage and hours to see your personalized dues breakdown.';
                }
            }

            function setActiveChartTab(mode) {
                activeChartTab = mode;
                const showGross = mode === 'gross';

                chartTabGross.classList.toggle('is-active', showGross);
                chartTabGross.setAttribute('aria-selected', String(showGross));
                chartTabGross.setAttribute('tabindex', showGross ? '0' : '-1');

                chartTabAllocation.classList.toggle('is-active', !showGross);
                chartTabAllocation.setAttribute('aria-selected', String(!showGross));
                chartTabAllocation.setAttribute('tabindex', showGross ? '-1' : '0');

                chartPanelGross.classList.toggle('hidden', !showGross);
                chartPanelAllocation.classList.toggle('hidden', showGross);

                if (!canRenderCharts) {
                    return;
                }
                if (showGross) {
                    grossIncomeChart.resize();
                } else {
                    duesChart.resize();
                    renderActiveState();
                }
            }

            function activateTabByIndex(index) {
                const normalizedIndex = (index + chartTabs.length) % chartTabs.length;
                const targetTab = chartTabs[normalizedIndex];
                setActiveChartTab(targetTab === chartTabGross ? 'gross' : 'allocation');
                targetTab.focus();
            }

            function calculateDues() {
                const hourlyWage = Number.parseFloat(hourlyWageInput.value) || 0;
                let hoursWeek = Number.parseFloat(hoursWeekInput.value) || 0;

                if (hoursWeek > MAX_WEEKLY_HOURS) {
                    hoursCapMessage.classList.remove('hidden');
                    hoursWeek = MAX_WEEKLY_HOURS;
                } else {
                    hoursCapMessage.classList.add('hidden');
                }

                const hasValidInput = hourlyWage > 0 && hoursWeek > 0;
                const weeklyGross = hasValidInput ? hourlyWage * hoursWeek : 0;
                const monthlyGross = hasValidInput ? weeklyGross * WEEKS_PER_MONTH : 0;
                const totalDues = hasValidInput ? Number(((monthlyGross * DUES_RATE) + DUES_FLAT).toFixed(2)) : 0;
                const allocationAmounts = computeAllocationAmounts(totalDues);

                currentDues = totalDues;
                updateSummary(totalDues, monthlyGross, allocationAmounts);
                updateGrossIncomeChart(totalDues, monthlyGross);
                updateAllocationChart(allocationAmounts);
                renderActiveState();
            }

            chartTabGross.addEventListener('click', () => {
                setActiveChartTab('gross');
            });

            chartTabAllocation.addEventListener('click', () => {
                setActiveChartTab('allocation');
            });

            chartTabs.forEach((tabButton, index) => {
                tabButton.addEventListener('keydown', (event) => {
                    if (event.key === 'ArrowRight') {
                        event.preventDefault();
                        activateTabByIndex(index + 1);
                    } else if (event.key === 'ArrowLeft') {
                        event.preventDefault();
                        activateTabByIndex(index - 1);
                    } else if (event.key === 'Home') {
                        event.preventDefault();
                        activateTabByIndex(0);
                    } else if (event.key === 'End') {
                        event.preventDefault();
                        activateTabByIndex(chartTabs.length - 1);
                    } else if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault();
                        setActiveChartTab(tabButton === chartTabGross ? 'gross' : 'allocation');
                    }
                });
            });

            legendButtons.forEach((button) => {
                const index = Number(button.dataset.segmentIndex);
                button.addEventListener('click', () => {
                    selectedSegmentIndex = index;
                    hoveredSegmentIndex = null;
                    renderActiveState();
                });
                button.addEventListener('mouseenter', () => {
                    hoveredSegmentIndex = index;
                    renderActiveState();
                });
                button.addEventListener('mouseleave', () => {
                    hoveredSegmentIndex = null;
                    renderActiveState();
                });
                button.addEventListener('focus', () => {
                    hoveredSegmentIndex = index;
                    renderActiveState();
                });
                button.addEventListener('blur', () => {
                    hoveredSegmentIndex = null;
                    renderActiveState();
                });
            });

            if (pieChartCanvas) {
                pieChartCanvas.addEventListener('focus', () => {
                    hoveredSegmentIndex = selectedSegmentIndex;
                    renderActiveState();
                });

                pieChartCanvas.addEventListener('blur', () => {
                    hoveredSegmentIndex = null;
                    renderActiveState();
                });

                pieChartCanvas.addEventListener('keydown', (event) => {
                    if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {
                        selectedSegmentIndex = (selectedSegmentIndex + 1) % ALLOCATIONS.length;
                        hoveredSegmentIndex = selectedSegmentIndex;
                        event.preventDefault();
                        renderActiveState();
                    } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
                        selectedSegmentIndex = (selectedSegmentIndex - 1 + ALLOCATIONS.length) % ALLOCATIONS.length;
                        hoveredSegmentIndex = selectedSegmentIndex;
                        event.preventDefault();
                        renderActiveState();
                    }
                });
            }

            hourlyWageInput.addEventListener('input', calculateDues);
            hoursWeekInput.addEventListener('input', calculateDues);

            setActiveChartTab(activeChartTab);
            calculateDues();
        });
    </script>
</body>
</html>
